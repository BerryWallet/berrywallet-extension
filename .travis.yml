language: node_js

branches:
  only:
    - /^v.*$/

node_js:
  - "8"

before_install:
  - npm i -g npm@5.6.0

install:
  - npm install
  - npm run build:prod

script:
  - echo 'Successful installed!'

before_deploy:
  - echo 'ready to Deploy!'

deploy:
  provider: releases
  strategy: git
  api_key:
    secure: DmdDGah+gXg02Wex0l37YpMnPZELpq1ec/TobxGB7AjjhP//xsKTfYmuNy5u+yrxcRZgl5ClvQRNE2fSw/dclgJyF07rlapeF5xYI3mqnOCHqTFCRDXUm5+scVMfzgE4ChO7pyVcX5FigXpAnwHCtVg119n5hP+SyqQDJiHZcLTmxsfBRWIKjj9cADvHRcYy/qBPsDPc6/oV8wHu1cW/7bRcodO5NvMFV6vOAYUtCsW7+AHrCZ2DL5yBFFP2DdRzecGQzrydVJEjWmWUTNaCCXUfQwD4Z18573Gj+PeiK3k5U/eh00RQjL48pTjkANpryNb6JlkRKA/q2C0urE2hVyD54kSGi3Yu8tLQDeBs4z/5OHfWSc0Lc44D+alzhsfkaZOjmEgvX37XzoCsavwVlh3d1r8YhCiWbQk/gkXb7V73P8SodzCI5faIErpvGw72lkYFPB8xe2cR00fs+XyexAVXu5VG8z5BeET77o9VFiAMUE7W34na/u/e7hCohQKlRHEqHxRlXk4eLVseXErS0+gZSiccXNvzUxnzchkZWheQvkhs14I3b6CK6TUrGKgfaduCPqP307tSBrMPvqUu1xy2Nww6nM4DKOl9y4kBvQfCAwfImQMaaTWnUVyq5I3ILaSCi9esAI1X3lkYFX59uVMwGRlDTeYEcihW/GX+QVg=
  file_glob: true
  file: artifacts/berrywallet-*
  skip_cleanup: true
  node_js: "8"
  on:
    repo: berrywallet/berrywallet-extension
    tags: true